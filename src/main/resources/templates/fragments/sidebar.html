<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <style>
        .submenu {
            display: none;
            padding-left: 35px;
        }

        .submenu.active {
            display: block;
        }

        .menu-toggle {
            cursor: pointer;
            user-select: none;
        }

        .menu-toggle .arrow {
            display: inline-block;
            transition: transform 0.2s;
            margin-right: 5px;
        }

        .menu-toggle.expanded .arrow {
            transform: rotate(90deg);
        }

        .submenu li {
            padding: 5px 0;
            font-size: 14px;
        }

        .submenu li a {
            color: #555;
            text-decoration: none;
        }

        .submenu li a:hover {
            color: #3498db;
        }
    </style>
</head>

<body>
    <!-- th:fragment="sidebarFragment" : ì´ nav íƒœê·¸ë¥¼ 'sidebarFragment'ë¼ëŠ” ì´ë¦„ì˜ ì¡°ê°ìœ¼ë¡œ ì •ì˜ -->
    <nav class="sidebar" th:fragment="sidebarFragment">
        <div class="profile-area">
            <div class="profile-info" style="font-weight: bold; font-size: 1.1em;">
                <span class="icon">ğŸ‘¤</span> <span th:text="${displayName}"></span>
            </div>
            <div class="profile-actions">
                <a th:href="@{/user/mypage}" class="action-link">ë§ˆì´ í˜ì´ì§€</a>

                <form th:action="@{/user/logout}" method="POST" class="logout-form">
                    <button type="submit" class="logout-btn">ë¡œê·¸ì•„ì›ƒ</button>
                </form>
            </div>
        </div>
        <ul class="nav-menu">
            <li class="active">
                <a
                    th:href="${currentProjectId != null} ? @{/projects/{id}/main(id=${currentProjectId})} : @{/projects}">
                    <span class="icon" style="margin-right: 15px;">ğŸ </span> Home
                </a>
            </li>
            <li><span class="icon" style="margin-right: 15px;">ğŸšª</span> Project Room</li>
            <li><span class="icon" style="margin-right: 15px;">ğŸ“¢</span> Notice</li>
            <li>
                <a th:href="@{'/tasks'}">
                    <span class="icon" style="margin-right: 15px;">ğŸ“…</span> Tasks
                </a>
            </li>
            <li>
                <a th:href="@{'/github/commits'}">
                    <span class="icon" style="margin-right: 15px;">ğŸ“</span> Github Commit
                </a>
            </li>
            <li>
                <a th:href="@{'/github/commits/chart'}">
                    <span class="icon" style="margin-right: 15px;">ğŸ“¤</span> Github Chart
                </a>
            </li>
            <li>
                <a th:href="@{'/github/commits/recommend'}">
                    <span class="icon" style="margin-right: 15px;">â—</span> Github Recommend
                </a>
            </li>
            <li><span class="icon" style="margin-right: 15px;">ğŸ—’ï¸</span> Note</li>

            <!-- ì‚°ì¶œë¬¼ with expandable submenu -->
            <li class="menu-toggle" onclick="toggleSubmenu(this)">
                <span class="arrow">â–¶</span>
                <span class="icon" style="margin-right: 15px;">ğŸ“¦</span> ì‚°ì¶œë¬¼
            </li>
            <ul class="submenu">
                <li>
                    <a th:href="@{'/deliverable/test?tab=all'}">
                        <span class="icon" style="margin-right: 10px;">ğŸ </span> Home
                    </a>
                </li>
                <li>
                    <a th:href="@{'/deliverable/test?tab=project'}">
                        <span class="icon" style="margin-right: 10px;">ğŸšª</span> Project Room
                    </a>
                </li>
                <li>
                    <a th:href="@{'/deliverable/test?tab=outputs'}">
                        <span class="icon" style="margin-right: 10px;">ğŸ“¦</span> Outputs
                    </a>
                </li>
                <li>
                    <a th:href="@{'/deliverable/test?tab=gantt'}">
                        <span class="icon" style="margin-right: 10px;">ğŸ“Š</span> Gantt Chart
                    </a>
                </li>
                <li>
                    <a th:href="@{'/deliverable/test?tab=meeting'}">
                        <span class="icon" style="margin-right: 10px;">ğŸ“‹</span> íšŒì˜ë¡
                    </a>
                </li>
                <li>
                    <a th:href="@{'/deliverable/test?tab=memo'}">
                        <span class="icon" style="margin-right: 10px;">ğŸ“</span> ë©”ëª¨ ëŒ€ì‹œë³´ë“œ
                    </a>
                </li>
            </ul>

            <li>
                <a th:href="@{'/template/test'}">
                    <span class="icon" style="margin-right: 15px;">ğŸ“„</span> ì–‘ì‹ ì œê³µ
                </a>
            </li>
            <li>
                <a th:href="@{'/meeting/test'}">
                    <span class="icon" style="margin-right: 15px;">ğŸ“‹</span> íšŒì˜ë¡
                </a>
            </li>
            <li>
                <a th:href="@{'/gantt/test'}">
                    <span class="icon" style="margin-right: 15px;">ğŸ“Š</span> Gantt Chart
                </a>
            </li>
            <li>
                <a th:href="@{'/projects/' + ${currentProjectId} + '/members'}">
                    <span class="icon" style="margin-right: 15px;">ğŸ‘¥</span> Members
                </a>
            </li>
            <li><span class="icon" style="margin-right: 15px;">âš™ï¸</span> Settings</li>
        </ul>
    </nav>

    <script>
        function toggleSubmenu(element) {
            element.classList.toggle('expanded');
            const submenu = element.nextElementSibling;
            submenu.classList.toggle('active');
        }
    </script>
</body>

</html>